schema: '2.0'
stages:
  make_dataset:
    cmd: python src/make_dataset.py --version v3 --out data/raw.csv
    deps:
    - path: src/make_dataset.py
      hash: md5
      md5: 31f9ae4f101a87344582a9eae4232384
      size: 1158
    params:
      params.yaml:
        dataset.version: v3
    outs:
    - path: data/raw.csv
      hash: md5
      md5: b21850dbc75bc238a4dc6b405d8e4d84
      size: 29106
  train:
    cmd: python src/train.py --data data/raw.csv --model_out models/model.pkl
    deps:
    - path: data/raw.csv
      hash: md5
      md5: b21850dbc75bc238a4dc6b405d8e4d84
      size: 29106
    - path: src/train.py
      hash: md5
      md5: 6830ade6c61600bc0d6a8248180f4a43
      size: 2680
    params:
      params.yaml:
        dataset.version: v3
        train:
          model: logistic_regression
          test_size: 0.2
          random_state: 42
          C: 0.5
    outs:
    - path: models/model.pkl
      hash: md5
      md5: 2fa0607eb286c73fbd4f4bdd0d9f180b
      size: 4154
  evaluate:
    cmd: python src/evaluate.py --data data/raw.csv --model models/model.pkl 
      --metrics reports/metrics.json
    deps:
    - path: data/raw.csv
      hash: md5
      md5: b21850dbc75bc238a4dc6b405d8e4d84
      size: 29106
    - path: models/model.pkl
      hash: md5
      md5: 2fa0607eb286c73fbd4f4bdd0d9f180b
      size: 4154
    - path: src/evaluate.py
      hash: md5
      md5: 4d67fde717d1152062627313fbcd2add
      size: 1342
    outs:
    - path: reports/metrics.json
      hash: md5
      md5: 73fedf085778d4b585b2f0eb06259078
      size: 130
  compute_train_stats:
    cmd: python monitoring/compute_train_stats.py
    deps:
    - path: data/raw.csv
      hash: md5
      md5: b21850dbc75bc238a4dc6b405d8e4d84
      size: 29106
    - path: monitoring/compute_train_stats.py
      hash: md5
      md5: 2a20984c3823bdc59606e92f7312384b
      size: 577
    outs:
    - path: stats/train_stats.json
      hash: md5
      md5: e07c178d988a3a71c8cc48cb423da767
      size: 494
  generate_prod_data:
    cmd: python monitoring/generate_prod_data.py
    deps:
    - path: data/raw.csv
      hash: md5
      md5: b21850dbc75bc238a4dc6b405d8e4d84
      size: 29106
    - path: monitoring/generate_prod_data.py
      hash: md5
      md5: af893a92346280204186ff30585238aa
      size: 506
    outs:
    - path: data/prod.csv
      hash: md5
      md5: e1538d692df9a12f0bfa684499eb9eea
      size: 94941
  detect_drift:
    cmd: python monitoring/detect_drift.py
    deps:
    - path: data/prod.csv
      hash: md5
      md5: e1538d692df9a12f0bfa684499eb9eea
      size: 94941
    - path: monitoring/detect_drift.py
      hash: md5
      md5: 06f64344fd2dbda8af3260e0f1285c5b
      size: 645
    - path: stats/train_stats.json
      hash: md5
      md5: e07c178d988a3a71c8cc48cb423da767
      size: 494
